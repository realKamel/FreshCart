<div>
  @defer (on viewport; hydrate on interaction) {
    <div
      class="fixed inset-0 z-[51] grid place-content-center bg-black/50 p-4"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modalTitle"
      tabindex="-1"
    >
      <div class="w-4xl rounded-lg bg-white p-6 shadow-lg">
        <div>
          <h2
            id="modalTitle"
            class="text-xl font-bold text-gray-900 sm:text-2xl"
          >
            Select Delivery Address
          </h2>
        </div>

        <div class="mt-2 w-full h-96 overflow-y-auto overflow-x-hidden">
          <div
            class="space-y-1 h-full"
            role="radiogroup"
            aria-label="Delivery Addresses"
            id="address-list"
          >
            @for (item of addresses(); track item._id) {
              <div class="relative p-2">
                <label
                  for="address-{{ item._id }}"
                  class="flex items-start justify-between gap-4 rounded border border-gray-300 bg-white p-3 text-sm font-medium shadow-sm transition-colors hover:bg-gray-50 has-checked:border-emerald-600 has-checked:ring-1 has-checked:ring-emerald-600 cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-600"
                  tabindex="0"
                  role="radio"
                  aria-checked="true"
                >
                  <div>
                    <h3 class="text-lg font-semibold text-gray-900">
                      {{ item.name }}
                    </h3>

                    <p class="text-gray-700 mt-1">
                      <span class="font-medium">Details:</span>
                      <span> {{ item.details }} </span>
                    </p>

                    <p class="text-gray-700 mt-1">
                      <span class="font-medium">City:</span>
                      <span> {{ item.city }} </span>
                    </p>

                    <p class="text-gray-700 mt-1">
                      <span class="font-medium">Phone:</span>
                      <span> {{ item.phone }} </span>
                    </p>
                  </div>

                  <input
                    type="radio"
                    name="DeliveryOption"
                    value="{{ item._id }}"
                    id="address-{{ item._id }}"
                    class="sr-only"
                  />
                </label>
              </div>
            } @empty {
              <div class="flex h-full justify-center items-center">
                <p class="text-2xl text-gray-500">No Addresses Yet</p>
              </div>
            }
          </div>
        </div>
      </div>

      <div class="mt-6 flex justify-end gap-2">
        <button
          type="button"
          (click)="isClosed.emit()"
          class="rounded cursor-pointer bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-200"
        >
          Cancel
        </button>
        <button
          type="button"
          class="rounded cursor-pointer bg-white border border-emerald-600 text-emerald-600 px-4 py-2 text-sm font-medium hover:text-white transition-colors hover:bg-emerald-700"
        >
          Edit Addresses
        </button>
        <button
          type="button"
          class="rounded cursor-pointer bg-emerald-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-emerald-700"
        >
          Confirm
        </button>
      </div>
    </div>
  } @placeholder {
    <p>loading</p>
  }
</div>
