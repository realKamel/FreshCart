<section class="mt-5 bg-gray-200 rounded-lg">
  <div class="container mx-0 p-10 grid grid-cols-10 gap-x-3">
    <aside class="flex flex-col gap-x-2 col-span-2">
      <div class="space-y-4">
        <details
          class="group relative overflow-hidden rounded border border-gray-300 shadow-sm"
        >
          <summary
            class="flex items-center justify-between gap-2 p-3 text-gray-700 transition-colors hover:text-gray-900 [&::-webkit-details-marker]:hidden"
          >
            <span class="text-sm font-medium"> Availability </span>

            <span class="transition-transform group-open:-rotate-180">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-4"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                />
              </svg>
            </span>
          </summary>

          <div
            class="divide-y divide-gray-300 border-t border-gray-300 bg-white"
          >
            <div class="flex items-center justify-between px-3 py-2">
              <span class="text-sm text-gray-700"> 0 Selected </span>

              <button
                type="button"
                class="text-sm text-gray-700 underline transition-colors hover:text-gray-900"
              >
                Reset
              </button>
            </div>

            <fieldset class="p-3">
              <legend class="sr-only">Checkboxes</legend>

              <div class="flex flex-col items-start gap-3">
                <label for="Option1" class="inline-flex items-center gap-3">
                  <input
                    type="checkbox"
                    class="size-5 rounded border-gray-300 shadow-sm"
                    id="Option1"
                  />

                  <span class="text-sm font-medium text-gray-700">
                    Option 1
                  </span>
                </label>

                <label for="Option2" class="inline-flex items-center gap-3">
                  <input
                    type="checkbox"
                    class="size-5 rounded border-gray-300 shadow-sm"
                    id="Option2"
                  />

                  <span class="text-sm font-medium text-gray-700">
                    Option 2
                  </span>
                </label>

                <label for="Option3" class="inline-flex items-center gap-3">
                  <input
                    type="checkbox"
                    class="size-5 rounded border-gray-300 shadow-sm"
                    id="Option3"
                  />

                  <span class="text-sm font-medium text-gray-700">
                    Option 3
                  </span>
                </label>
              </div>
            </fieldset>
          </div>
        </details>

        <details
          class="group relative overflow-hidden rounded border border-gray-300 shadow-sm"
        >
          <summary
            class="flex items-center justify-between gap-2 p-3 text-gray-700 transition-colors hover:text-gray-900 [&::-webkit-details-marker]:hidden"
          >
            <span class="text-sm font-medium"> Price </span>

            <span class="transition-transform group-open:-rotate-180">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-4"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M19.5 8.25l-7.5 7.5-7.5-7.5"
                />
              </svg>
            </span>
          </summary>

          <div
            class="divide-y divide-gray-300 border-t border-gray-300 bg-white"
          >
            <div class="flex items-center justify-between px-3 py-2">
              <span class="text-sm text-gray-700"> Max price is $600 </span>

              <button
                type="button"
                class="text-sm text-gray-700 underline transition-colors hover:text-gray-900"
              >
                Reset
              </button>
            </div>

            <div class="flex items-center gap-3 p-3">
              <label for="MinPrice">
                <span class="text-sm text-gray-700"> Min </span>

                <input
                  type="number"
                  id="MinPrice"
                  value="0"
                  class="mt-0.5 w-full rounded border-gray-300 shadow-sm sm:text-sm"
                />
              </label>

              <label for="MaxPrice">
                <span class="text-sm text-gray-700"> Max </span>

                <input
                  type="number"
                  id="MaxPrice"
                  value="600"
                  class="mt-0.5 w-full rounded border-gray-300 shadow-sm sm:text-sm"
                />
              </label>
            </div>
          </div>
        </details>
      </div>
    </aside>
    <div class="col-span-8 flex flex-col gap-2">
      <main class="w-full bg-white rounded shadow">
        <div class="grid grid-cols-12 gap-2 items-center justify-center">
          @for (item of this.result().data; track $index) {
            <a
              class="sm:col-span-2 relative lg:col-span-3 grid grid-rows-3 border items-stretch h-[33rem] overflow-hidden border-gray-200 shadow rounded-lg group"
            >
              <button
                type="button"
                (click)="AddProductToWishlist(item._id)"
                title="Add to Wishlist"
                [class]="
                  !item.inWishList
                    ? ['text-gray-900', 'hover:text-red-600/75']
                    : ['text-red-600', 'hover:text-gray-600/75']
                "
                class="absolute cursor-pointer size-8 text-xl end-4 top-4 z-10 rounded-full bg-white p-1.5 transition-all shadow-lg duration-200"
              >
                <span class="sr-only">Wishlist</span>
                @if (!item.inWishList) {
                  <ng-icon name="phosphorHeartStraight" />
                } @else {
                  <ng-icon name="phosphorHeartStraightFill" />
                }
              </button>

              <figure class="row-span-2 overflow-hidden">
                <img
                  [routerLink]="['/product', item._id]"
                  [src]="item.imageCover"
                  alt="{{ item.slug }}"
                  class="w-full h-full cursor-pointer object-cover transition duration-500 group-hover:scale-105"
                />
              </figure>

              <div
                class="grid row-span-1 relative border bg-white border-gray-100 p-3"
              >
                <div
                  [routerLink]="['/product', item._id]"
                  class="cursor-pointer"
                >
                  <p class="text-gray-700">
                    E{{ item.price | currency: "GBP" }}
                    <!-- <span class="text-gray-400 line-through">$80</span> -->
                  </p>

                  <h3
                    class="mt-1.5 text-lg overflow-hidden text-ellipsis line-clamp-2 font-medium text-gray-900"
                  >
                    {{ item.title | titlecase }}
                  </h3>
                </div>

                <div class="mt-4 self-end gap-4">
                  <button
                    (click)="AddProductToCart(item._id)"
                    [class]="
                      isProductInCart('1')
                        ? ['border-red-600', 'text-red-600', 'hover:bg-red-600']
                        : [
                            'border-emerald-600',
                            'text-gray-900',
                            'hover:bg-emerald-600',
                          ]
                    "
                    title="Add To Cart"
                    type="button"
                    class="w-full flex gap-x-0.5 justify-center items-center shadow border rounded-sm bg-white px-4 py-3 text-sm font-medium transition-all duration-200 hover:text-white cursor-pointer"
                  >
                    @if (!isProductInCart("1")) {
                      Add to Cart
                      <ng-icon name="lucideShoppingCart" />
                    } @else {
                      Remove From Cart
                      <ng-icon name="lucideTrash2" />
                    }
                  </button>
                </div>
              </div>
            </a>
          }
        </div>
      </main>
      <ul class="flex mt-5 justify-center gap-1 text-gray-900">
        <li>
          <button
            type="button"
            title="Get Prev Page"
            (click)="getPrevPage(result().metadata.currentPage)"
            class="grid size-8 place-content-center rounded border border-gray-200 transition-colors hover:bg-gray-50 rtl:rotate-180"
            aria-label="Previous page"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="size-4"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </li>

        <li>
          <a
            class="block size-8 rounded border border-gray-200 text-center text-sm/8 font-medium transition-colors hover:bg-gray-50"
          >
            {{ result().metadata.currentPage - 1 }}
          </a>
        </li>

        <li
          class="block size-8 rounded border border-emerald-600 bg-emerald-600 text-center text-sm/8 font-medium text-white"
        >
          {{ result().metadata.currentPage }}
        </li>

        <li
          class="block size-8 rounded border border-gray-200 text-center text-sm/8 font-medium transition-colors hover:bg-gray-50"
        >
          {{ result().metadata.nextPage }}
        </li>

        <li>
          <button
            title="Get Next Page"
            type="button"
            (click)="getNextPage(result().metadata.currentPage)"
            class="grid size-8 place-content-center rounded border border-gray-200 transition-colors hover:bg-gray-50 rtl:rotate-180"
            aria-label="Next page"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="size-4"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </li>
      </ul>
    </div>
  </div>
</section>
