<mat-drawer-container class="min-h-dvh" [hasBackdrop]="isMobile()">
  <mat-drawer
    class="border border-gray-100"
    [opened]="!isMobile()"
    #drawer
    mode="side"
  >
    <aside id="default-sidebar" class="z-40 h-full" aria-label="Sidebar">
      <div
        class="h-full w-full px-3 py-4 overflow-y-auto bg-white lg:border lg:border-gray-200 rounded-lg dark:bg-emerald-800"
      >
        <ul class="space-y-2 font-medium">
          @if (isMobile()) {
            <li>
              <button
                (click)="drawer.close()"
                type="button"
                class="flex justify-end items-center p-2 text-emerald-900 rounded-lg w-full cursor-pointer dark:text-white hover:bg-emerald-100 dark:hover:bg-emerald-700 group"
              >
                <ng-icon name="lucideX" />
                <span class="ms-3">Close</span>
              </button>
            </li>
          }
          <li>
            <button
              type="button"
              (click)="isMobile() ? drawer.close() : ''"
              [routerLink]="['/account', 'profile']"
              [queryParams]="{ skipTransition: true }"
              [routerLinkActive]="['bg-emerald-100', 'dark:bg-emerald-700']"
              class="flex items-center p-2 text-emerald-900 rounded-lg w-full cursor-pointer dark:text-white hover:bg-emerald-100 dark:hover:bg-emerald-700 group"
            >
              <ng-icon name="lucideCircleUserRound" />
              <span class="ms-3">Profile</span>
            </button>
          </li>
          <li>
            <button
              (click)="isMobile() ? drawer.close() : ''"
              type="button"
              [routerLink]="['/account', 'orders']"
              [queryParams]="{ skipTransition: true }"
              [routerLinkActive]="['bg-emerald-100', 'dark:bg-emerald-700']"
              class="flex justify-between items-center p-2 text-emerald-900 rounded-lg w-full cursor-pointer dark:text-white hover:bg-emerald-100 dark:hover:bg-emerald-700 group"
            >
              <span class="flex justify-center items-center gap-x-1">
                <ng-icon name="lucideBoxes" />
                <span class="flex-1 ms-3 whitespace-nowrap">Orders</span>
              </span>
              <span
                class="inline-flex items-center justify-center px-2 ms-3 text-sm font-medium text-emerald-800 bg-emerald-100 rounded-full dark:bg-emerald-700 dark:text-emerald-300"
                >{{ ordersCount() }}</span
              >
            </button>
          </li>
          <li>
            <button
              (click)="isMobile() ? drawer.close() : ''"
              type="button"
              [routerLink]="['/account', 'wishlist']"
              [queryParams]="{ skipTransition: true }"
              [routerLinkActive]="['bg-emerald-100', 'dark:bg-emerald-700']"
              class="flex justify-between items-center p-2 text-emerald-900 rounded-lg w-full cursor-pointer dark:text-white hover:bg-emerald-100 dark:hover:bg-emerald-700 group"
            >
              <span class="flex justify-center items-center gap-x-1">
                <ng-icon name="lucideHeart" />
                <span class="flex-1 ms-3 whitespace-nowrap">Wishlist</span>
              </span>
              <span
                class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-emerald-800 bg-emerald-100 rounded-full dark:bg-emerald-900 dark:text-emerald-300"
                >{{ this.wishlistCount() || 0 }}</span
              >
            </button>
          </li>
          <li>
            <button
              (click)="isMobile() ? drawer.close() : ''"
              type="button"
              [routerLink]="['/account', 'cart']"
              [queryParams]="{ skipTransition: true }"
              [routerLinkActive]="['bg-emerald-100', 'dark:bg-emerald-700']"
              class="flex justify-between items-center p-2 text-emerald-900 rounded-lg w-full cursor-pointer dark:text-white hover:bg-emerald-100 dark:hover:bg-emerald-700 group"
            >
              <span class="flex justify-center items-center gap-x-1">
                <ng-icon name="lucideShoppingCart" />
                <span class="flex-1 ms-3 whitespace-nowrap">Cart</span>
              </span>
              <span
                class="inline-flex items-center justify-center w-3 h-3 p-3 ms-3 text-sm font-medium text-emerald-800 bg-emerald-100 rounded-full dark:bg-emerald-900 dark:text-emerald-300"
                >{{ this.cartCount() || 0 }}</span
              >
            </button>
          </li>
          <li>
            <button
              (click)="_AuthService.signOut()"
              type="button"
              title="Log Out"
              class="flex items-center p-2 text-emerald-900 hover:text-red-900 rounded-lg w-full cursor-pointer dark:text-white hover:bg-red-100 dark:hover:bg-red-700 group"
            >
              <span class="flex justify-center items-center gap-x-1">
                <ng-icon name="lucideLogOut"></ng-icon>
                <span class="flex-1 ms-3 whitespace-nowrap">Log Out</span>
              </span>
            </button>
          </li>
          <li></li>
        </ul>
      </div>
    </aside>
  </mat-drawer>
  <mat-drawer-content>
    <section class="p-3">
      @if (isMobile()) {
        <button
          title="Toggle Side Nav"
          type="button"
          class="text-nowrap rounded text-2xl flex justify-center items-center text-center gap-0.5 text-primary-700"
          (click)="drawer.toggle()"
        >
          <ng-icon name="lucidePanelRight"></ng-icon>
          Menu
        </button>
      }
      <router-outlet />
    </section>
  </mat-drawer-content>
</mat-drawer-container>
